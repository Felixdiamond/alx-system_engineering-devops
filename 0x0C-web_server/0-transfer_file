#!/bin/bash

if [ $# -ne 4 ]; then
  echo "Usage: $0 <source_file_path> <server_ip> <server_username> <ssh_key_path>"
  exit 1
fi

SOURCE_FILE_PATH=$1
SERVER_IP=$2
SERVER_USERNAME=$3
SSH_KEY_PATH=$4

if [ ! -f "$SOURCE_FILE_PATH" ]; then
  echo "Error: Source file does not exist or is not a file: $SOURCE_FILE_PATH"
  exit 1
fi

if [ ! -f "$SSH_KEY_PATH" ]; then
  echo "Error: SSH key file does not exist or is not a file: $SSH_KEY_PATH"
  exit 1
fi

scp -o StrictHostKeyChecking=no -i "$SSH_KEY_PATH" "$SOURCE_FILE_PATH" "$SERVER_USERNAME@$SERVER_IP:~"

if [ $? -ne 0 ]; then
  echo "Error: Failed to transfer file."
  exit 1
fi

echo "File transferred successfully."
exit 0

